name: Journey App CI/CD (Docker Only)

on:
push:
branches:
- main

jobs:
build-and-push:
runs-on: ubuntu-latest
steps:
  # 1️⃣ Checkout the repository
  - name: Checkout repository
    uses: actions/checkout@v3

  # 2️⃣ Log in to Docker Hub
  - name: Log in to Docker Hub
    uses: docker/login-action@v2
    with:
      username: ${{ secrets.DOCKER_USERNAME }}
      password: ${{ secrets.DOCKER_PASSWORD }}

  # 3️⃣ Build backend Docker image
  - name: Build backend image
    run: docker build -t abhilasha360/journey-backend:latest ./backend

  # 4️⃣ Build frontend Docker image
  - name: Build frontend image
    run: docker build -t abhilasha360/journey-frontend:latest ./frontend

  # 5️⃣ Push backend Docker image
  - name: Push backend image
    run: docker push abhilasha360/journey-backend:latest

  # 6️⃣ Push frontend Docker image
  - name: Push frontend Docker image
    run: docker push abhilasha360/journey-frontend:latest

